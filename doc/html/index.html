<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>DS18S20 library: DS18S20library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">DS18S20 library
   &#160;<span id="projectnumber">v0.5.1</span>
   </div>
   <div id="projectbrief">DS18S20/DS18B20 library in C for AVR 8-bit microcontrollers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">DS18S20library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Goce Boshkovski</dd></dl>
<h1><a class="anchor" id="desc"></a>
Short Description</h1>
<p>DS18S20library is an AVR C library for connecting DS18S20 and DS18B20 temperature sensors to 8-bit AVR microcontrollers. The library implements 1-Wire interface for communication with DS18S20/DS18B20. Originally it was written for DS18S20 and starting from version 0.4 the library fully supports DS18B20 sensor model as well.</p>
<h1><a class="anchor" id="whatsnew"></a>
What's New</h1>
<p>Version 0.5.1</p><ul>
<li><a class="el" href="group__DS18S20func.html#ga028cc2ae214e05d66ed57d001660e703" title="This functions initiates a temperature conversion via CONVERT_T function command and then issues READ...">DS18x20_MeasureTemperature()</a> has been extended with READ_SCRATCHPAD command so the temperature can be measured and read in one step;</li>
<li>Minor update of <a class="el" href="group__DS18S20func.html#gae751b5682f2e8801fdc4a9c636a8b7eb" title="Init function for DS18x20. The function prepares the 1-Wire bus and runs the sensors initialization p...">DS18x20_Init()</a>.</li>
</ul>
<h1><a class="anchor" id="hwsupp"></a>
Supported MCU Hardware</h1>
<p>The library is compatible with every 8-bit AVR microcontroller.</p>
<h1><a class="anchor" id="sensorsupp"></a>
DS18S20 support and implemented functions</h1>
<p>DS1820 support and implemented functions</p>
<p>The following sensor models are supported by the library:</p><ul>
<li>DS18S20;</li>
<li>DS18B20.</li>
</ul>
<p>The library can be used only in cases when DS18x20 sensor is powered by external power supply. Although the library includes a function that can determine the power supply type, this information is not taken in consideration when the library communicates with the sensor via the 1-Wire bus.</p>
<p>Current version supports 1-Wire bus with only one device attached to it. SEARCH_ROM is not implemented in the library so it cannot query the bus for connected devices/sensors.</p>
<p>Implemented DS18x20 ROM Commands:</p><ul>
<li>DS18S20/DS18B20 sensor initialization;</li>
<li>READ ROM command for fetching the ROM address of the sensor;</li>
<li>SKIP ROM command so the library can speak to the sensor directly without using sensors 1-Wire bus address.</li>
</ul>
<p>Implemented DS18x20 Function Commands:</p><ul>
<li>Convert T command that initiates a single temperature conversion;</li>
<li>READ SCRATCHPAD command that allows the master to read the contents of the sensor memory;</li>
<li>READ POWER SUPPLY command to determine power supply type of DS18S20/DS18B20;</li>
<li>WRITE SCRATCHPAD command that allows the master to write 2 bytes of data to the scratchpad of DS18S20/DS18B20;</li>
<li>COPY SCRATCHPAD command that copies the contents of the scratchpad TH and TL registers (bytes 2 and 3) to EEPROM;</li>
<li>RECALL E2 recalls the alarm trigger values (TH and TL) from EEPROM of the sensor.</li>
</ul>
<h1><a class="anchor" id="bus"></a>
1-Wire interface</h1>
<p>The underline implementation of 1-Wire interface relies on timer functions that are part of AVR-libc and defined in util/delay.h header. Those functions require the CPU freq to be defined via F_CPU macro. This value can be set globally during the compiling time using -DF_CPU=cpu_freq_valueL switch. If this macro is not defined, the library will assign a default value of 4MHz.</p>
<h1><a class="anchor" id="use"></a>
Usage</h1>
<p>The library use DS18x20_Init function to define the 1-Wire bus and initialize the sensor. The function detects the sensor model (DS18B20 or DS18S20) during the initialization process. For bus definition, the init function requires two arguments:</p><ul>
<li>the address of MCU PORT used for 1-Wire bus;</li>
<li>MCU pin that is connected to the DQ pin of DS18S20/DS18B20. The first argument of the init function is a pointer to the structure that represents the sensor.</li>
</ul>
<p>For example: </p><pre class="fragment">TSDS18x20 DS18x20;
TSDS18x20 *pDS18x20 = &amp;DS18x20;

DS18x20_Init(pDS18S20,&amp;PORTD,PD5);
</pre><p>After the initialization step, the rest of the library functions/macros can be used to get the address of the sensor, start a temperature conversion, define temperature resolution in case of DS18B20 sensor etc.</p>
<p>For example: </p><pre class="fragment">DS18x20_MeasureTemperature(pDS18x20);
</pre><p>initiates a temperature conversion and fetches the sensor memory with the temperature reading. The only argument of the function is the same pointer as the one in <a class="el" href="group__DS18S20func.html#gae751b5682f2e8801fdc4a9c636a8b7eb" title="Init function for DS18x20. The function prepares the 1-Wire bus and runs the sensors initialization p...">DS18x20_Init()</a> function.</p>
<p>See the documentation section for further details.</p>
<p>Tested on Atmega32 and Atiny2313 microcontrollers.</p>
<dl class="section warning"><dt>Warning</dt><dd>The source is provided as it is without any warranty. Use it on your own risk! The author does not take any responsibility for the damage caused while using this software. </dd></dl>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Aug 27 2015 23:41:58 for DS18S20 library by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
